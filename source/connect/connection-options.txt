.. _pymongo-connection-options:

======================
Set Connection Options
======================

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: connection string, URI, server, Atlas, settings, configure

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Overview
--------

This section describes the MongoDB connection and authentication options
available in {+driver-short+}. You can configure your connection using either
the connection URI or arguments to the ``MongoClient`` constructor.

.. _pymongo-connection-uri:

Using the Connection URI
~~~~~~~~~~~~~~~~~~~~~~~~

If you pass a connection URI to the ``MongoClient`` constructor, you can include
connection options in the string as ``<name>=<value>`` pairs. In the following example,
the connection URI contains the ``connectTimeoutMS`` option with a value of ``60000``
and the ``tls`` option with a value of ``true``:

.. literalinclude:: /includes/connect/local_connection_config.py
   :language: python
   :dedent:
   :start-after: # start local connection config
   :end-before: # end local connection config

.. _pymongo-mongo-client-settings:

Using a ``MongoClient``
~~~~~~~~~~~~~~~~~~~~~~~

You can pass connection options as arguments to the ``MongoClient`` constructor
instead of including them in your connection URI.
Configuring the connection this way makes it easier to
change settings at runtime and helps you catch errors during compilation.
The following example shows how to use the ``MongoClient`` constructor to set
connection options:

.. literalinclude:: /includes/connect/mongoclient_settings_config.py
   :language: python
   :dedent:
   :start-after: # start mongo client settings config
   :end-before: # end mongo client settings config

Connection Options
------------------

The following sections describe the connection options available in {+driver-short+}.
If a ``MongoClient`` parameter maps to more than one
option in the connection string, the **Connection URI Example** shows all
relevant options.

.. todo: .. note::
   If you're using a query parameter for a time duration, the value must be in
   milliseconds. For example, to specify 60 seconds, use the value ``60000``. If you're
   using a ``MongoClientSettings`` object for a time duration, use the appropriate
   ``TimeSpan`` value.

Network Compression
~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1
   :widths: 30 70

   * - Connection Option
     - Description

   * - **compressors**
     - | The preferred compression types, in order, for wire-protocol messages sent to
       | or received from the server. The driver uses the first of these compression types
       | that the server supports.
       |
       | **Data Type**: {+string-data-type+}
       | **Default**: ``None``
       | **MongoClient Example**: ``compressors = "snappy,zstd,zlib"``
       | **Connection URI Example**: ``compressors=snappy,zstd,zlib``

   * - **zlibCompressionLevel**
     - | The compression level for zlib to use. This option accepts
       | an integer value between ``-1`` and ``9``:
       | 
       | - **-1:** (Default). zlib uses its default compression level (usually ``6``).
       | - **0:** No compression.
       | - **1:** Fastest speed but lowest compression.
       | - **9:** Best compression but slowest speed.
       |
       | **Data Type**: {+int-data-type+}
       | **Default**: ``-1``
       | **MongoClient Example**: ``zlibCompressionLevel = "3``
       | **Connection URI Example**: ``zlibCompressionLevel=3``